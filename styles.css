:root{
    /* Enhanced dark theme with richer colors */
    --bg: #080e1a;
    --bg2: #0d1424;
    --bg3: #111827;
    --text: #f1f5f9;
    --muted: #94a3b8;
    --muted-2: #64748b;

    /* Vibrant brand colors */
    --brand: #10b981;
    --brand-light: #34d399;
    --brand-dark: #059669;

    /* Surface layers for depth */
    --card: #0f1729;
    --border: rgba(148, 163, 184, 0.15);
    --border-strong: rgba(148, 163, 184, 0.3);

    /* Status colors - more vibrant */
    --red: #f43f5e;
    --yellow: #fbbf24;
    --good: #10b981;
    --ok: #34d399;
    --mid: #fbbf24;
    --hard: #fb923c;
    --pain: #f43f5e;

    /* Surface helpers with glassmorphism */
    --surface-1: rgba(255, 255, 255, 0.05);
    --surface-2: rgba(255, 255, 255, 0.08);
    --surface-3: rgba(255, 255, 255, 0.12);

    /* Accent colors */
    --accent: #3b82f6;
    --accent-light: #60a5fa;
    --accent-weak: rgba(59, 130, 246, 0.15);
    --accent-strong: rgba(59, 130, 246, 0.25);

    /* Shadows for depth */
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.25);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.35);
    --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.45);

    /* Gradients */
    --gradient-brand: linear-gradient(135deg, #10b981 0%, #059669 100%);
    --gradient-accent: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    --gradient-surface: linear-gradient(180deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.02) 100%);
    
    /* Pitch colors */
    --pitch-green: #2d5a27;
    --pitch-green-light: #3d7a37;
    --pitch-line: rgba(255, 255, 255, 0.3);
  }
  
  *{box-sizing:border-box;margin:0;padding:0}

  html,body{
    height:100%;
    font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
    line-height:1.6;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    scroll-behavior:smooth;
    overflow-x:hidden;
    max-width:100vw;
  }

  a{
    color:var(--accent-light);
    text-decoration:none;
    transition:color 0.2s ease, opacity 0.2s ease;
  }
  a:hover{
    color:var(--brand-light);
    text-decoration:none;
    opacity:0.9;
  }

  h1,h2,h3,h4,h5,h6{
    line-height:1.3;
    letter-spacing:-0.02em;
    font-weight:600;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar{width:10px;height:10px}
  ::-webkit-scrollbar-track{background:var(--bg2)}
  ::-webkit-scrollbar-thumb{background:var(--surface-3);border-radius:10px;border:2px solid var(--bg2)}
  ::-webkit-scrollbar-thumb:hover{background:var(--muted-2)}
  
  /* ─── Top bar ───────────────────────────────────────── */
  .topbar{
    position:sticky;top:0;z-index:100;
    display:flex;align-items:center;gap:16px;
    padding:12px 20px;
    background:rgba(13, 20, 36, 0.85);
    color:var(--text);
    border-bottom:1px solid var(--border-strong);
    backdrop-filter:saturate(1.3) blur(16px);
    box-shadow:var(--shadow-md);
    flex-wrap:wrap;
  }
  
  .brand{
    display:flex;
    align-items:center;
    gap:8px;
    font-weight:700;
    letter-spacing:0.5px;
    font-size:1.05rem;
  }
  .brand-icon{
    font-size:1.4rem;
  }
  .brand-text{
    background:var(--gradient-brand);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }
  .season{
    color:var(--muted);
    font-weight:600;
    opacity:0.85;
    font-size:0.9rem;
  }
  
  /* Live badge */
  .live-badge{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:4px 10px;
    background:rgba(239, 68, 68, 0.15);
    border:1px solid rgba(239, 68, 68, 0.4);
    border-radius:999px;
    font-size:11px;
    font-weight:700;
    color:#fca5a5;
    animation:live-pulse 2s ease-in-out infinite;
  }
  .live-dot{
    width:8px;
    height:8px;
    background:#ef4444;
    border-radius:50%;
    animation:live-dot-pulse 1.5s ease-in-out infinite;
  }
  @keyframes live-pulse{
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }
  @keyframes live-dot-pulse{
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.7; }
  }
  
  /* ─── Deadline Countdown ───────────────────────────── */
  .deadline-box{
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:8px 16px;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:12px;
    min-width:140px;
    transition:all 0.3s ease;
  }
  .deadline-label{
    font-size:10px;
    text-transform:uppercase;
    letter-spacing:0.05em;
    color:var(--muted);
    font-weight:600;
  }
  .deadline-timer{
    font-size:1.1rem;
    font-weight:700;
    font-variant-numeric:tabular-nums;
    color:var(--text);
    letter-spacing:0.02em;
  }
  .deadline-gw{
    font-size:11px;
    color:var(--muted);
    font-weight:500;
  }
  .deadline-box.deadline-urgent{
    background:rgba(251, 191, 36, 0.1);
    border-color:rgba(251, 191, 36, 0.4);
  }
  .deadline-box.deadline-urgent .deadline-timer{
    color:#fde68a;
  }
  .deadline-box.deadline-critical{
    background:rgba(239, 68, 68, 0.15);
    border-color:rgba(239, 68, 68, 0.4);
    animation:deadline-critical-pulse 1s ease-in-out infinite;
  }
  .deadline-box.deadline-critical .deadline-timer{
    color:#fca5a5;
  }
  @keyframes deadline-critical-pulse{
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
  }
  .deadline-box.deadline-locked{
    background:rgba(148, 163, 184, 0.1);
    border-color:rgba(148, 163, 184, 0.3);
  }
  .deadline-box.deadline-locked .deadline-timer{
    color:var(--muted);
  }
  
  /* ─── Theme Toggle ───────────────────────────────── */
  .topbar-right{
    display:flex;
    align-items:center;
    gap:12px;
    margin-left:auto;
  }
  .theme-toggle{
    position:relative;
    width:40px;
    height:40px;
    border:1px solid var(--border);
    background:var(--surface-1);
    border-radius:10px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:18px;
    transition:all 0.2s ease;
    overflow:hidden;
  }
  .theme-toggle:hover{
    background:var(--surface-2);
    border-color:var(--border-strong);
    transform:scale(1.05);
  }
  .theme-icon-dark,
  .theme-icon-light{
    position:absolute;
    transition:all 0.3s ease;
  }
  .theme-icon-light{
    opacity:0;
    transform:translateY(20px) rotate(-90deg);
  }
  .theme-toggle.is-light .theme-icon-dark{
    opacity:0;
    transform:translateY(-20px) rotate(90deg);
  }
  .theme-toggle.is-light .theme-icon-light{
    opacity:1;
    transform:translateY(0) rotate(0deg);
  }

  .nav{
    display:flex;
    gap:6px;
    align-items:center;
    overflow-x:auto;
    padding:4px;
    border-radius:12px;
    flex:1;
  }
  .nav::-webkit-scrollbar{height:6px}
  .nav::-webkit-scrollbar-thumb{background:var(--surface-2);border-radius:99px}
  .nav a{
    margin:0;
    padding:9px 16px;
    border-radius:10px;
    border:1px solid transparent;
    background:var(--surface-1);
    white-space:nowrap;
    font-weight:500;
    font-size:0.9rem;
    transition:all 0.2s ease;
  }
  .nav a:hover{
    background:var(--accent-weak);
    border-color:var(--accent);
    transform:translateY(-1px);
    box-shadow:var(--shadow-sm);
  }
  .nav a.active{
    background:var(--accent-weak);
    border-color:var(--accent);
    color:var(--accent-light);
    font-weight:600;
  }

  @media (max-width:1100px){
    .topbar{
      flex-wrap:wrap;
    }
    .nav{
      order:10;
      width:100%;
      flex:none;
      margin-top:8px;
    }
  }
  @media (max-width:700px){
    .deadline-box{
      padding:6px 12px;
      min-width:auto;
    }
    .deadline-timer{
      font-size:0.95rem;
    }
  }
  
  /* ─── Footer ───────────────────────────────────────── */
  .footer{
    position:fixed;
    left:300px;
    right:0;
    bottom:0;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:10px 20px;
    font-size:12px;
    color:var(--muted);
    background:rgba(13, 20, 36, 0.9);
    backdrop-filter:blur(12px);
    border-top:1px solid var(--border-strong);
    z-index:50;
  }
  .footer-left{
    display:flex;
    align-items:center;
    gap:8px;
  }
  .footer-right{
    display:flex;
    align-items:center;
    gap:16px;
  }
  .sep{opacity:.6}
  
  /* Last Updated indicator */
  .last-updated{
    display:flex;
    align-items:center;
    gap:6px;
  }
  .update-dot{
    width:8px;
    height:8px;
    background:var(--good);
    border-radius:50%;
    transition:background 0.3s ease;
  }
  .update-dot.stale{
    background:var(--yellow);
  }
  .update-dot.old{
    background:var(--red);
  }
  
  /* Manual refresh button */
  .refresh-btn{
    display:flex;
    align-items:center;
    gap:4px;
    padding:4px 10px;
    background:var(--surface-2);
    border:1px solid var(--border);
    border-radius:6px;
    color:var(--text);
    font-size:12px;
    font-weight:500;
    cursor:pointer;
    transition:all 0.2s;
  }
  .refresh-btn:hover:not(:disabled){
    background:var(--accent-weak);
    border-color:var(--accent);
    color:var(--accent-light);
  }
  .refresh-btn:disabled{
    opacity:0.5;
    cursor:not-allowed;
  }
  .refresh-btn .refresh-icon{
    font-size:14px;
    transition:transform 0.3s;
  }
  .refresh-btn:not(:disabled):hover .refresh-icon{
    transform:rotate(180deg);
  }

  /* Old auto-refresh indicator (deprecated) */
  .auto-refresh-status{
    display:none;
    align-items:center;
    gap:4px;
    padding:4px 8px;
    background:rgba(59, 130, 246, 0.15);
    border:1px solid rgba(59, 130, 246, 0.3);
    border-radius:999px;
    font-size:11px;
    font-weight:600;
    color:var(--accent-light);
  }
  .refresh-icon{
    animation:spin 2s linear infinite;
  }
  @keyframes spin{
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  @media (max-width:700px){
    .footer{left:0}
    .footer{flex-direction:column;gap:8px;text-align:center}
  }
  
  /* ─── Sidebar / layout ──────────────────────────────── */
  .sidebar{
    position:fixed;
    left:0;
    top:64px;
    bottom:44px;
    width:300px;
    padding:20px;
    overflow:auto;
    background:var(--bg2);
    border-right:1px solid var(--border-strong);
    box-shadow:var(--shadow-md);
  }
  .sidebar h3{
    margin:0 0 16px 0;
    font-size:1.15rem;
    color:var(--text);
    letter-spacing:-0.01em;
  }
  .sidebar label{
    display:block;
    font-size:13px;
    margin:14px 0 6px;
    color:var(--muted);
    font-weight:500;
  }
  .sidebar input{
    width:100%;
    margin-top:6px;
    padding:11px 14px;
    border-radius:10px;
    border:1px solid var(--border);
    background:var(--bg);
    color:var(--text);
    font-size:14px;
    transition:all 0.2s ease;
  }
  .sidebar input:focus{
    outline:none;
    border-color:var(--accent);
    background:var(--surface-1);
    box-shadow:0 0 0 3px var(--accent-weak);
  }
  .sidebar .btn{
    width:100%;
    margin-top:14px;
    padding:11px 14px;
    border-radius:10px;
    border:1px solid var(--brand);
    background:var(--gradient-brand);
    color:#ffffff;
    cursor:pointer;
    font-weight:600;
    font-size:14px;
    transition:all 0.2s ease;
    box-shadow:var(--shadow-sm);
  }
  .sidebar .btn:hover{
    transform:translateY(-2px);
    box-shadow:var(--shadow-md);
  }
  .sidebar .btn:active{
    transform:translateY(0);
  }
  .sidebar-note{
    margin-top:16px;
    color:var(--muted);
    font-size:12px;
    line-height:1.5;
    padding:10px;
    background:var(--surface-1);
    border-radius:8px;
    border:1px solid var(--border);
  }
  .sidebar-meta{
    margin-top:20px;
    font-size:13px;
    color:var(--muted);
    display:grid;
    gap:8px;
    padding:12px;
    background:var(--surface-1);
    border-radius:10px;
    border:1px solid var(--border);
  }
  
  /* Sidebar help block */
  .sidebar details.help-ids{margin-top:16px; font-size:12px; color:var(--muted); max-width:100%;}
  .sidebar details.help-ids summary{cursor:pointer; user-select:none; font-size:13px; color:var(--text);}
  .sidebar details.help-ids .help-steps{margin:6px 0 0 0; overflow-x:hidden; max-width:100%;}
  .sidebar details.help-ids p{margin:.35rem 0;}
  .sidebar details.help-ids ol{margin:.25rem 0 .6rem 16px; padding:0;}
  .sidebar details.help-ids li{margin:.15rem 0; line-height:1.3;}
  .sidebar details.help-ids code{
    display:block; margin-top:4px;
    font-size:11px; line-height:1.25;
    background:#0f1a2d; border:1px solid #22314c; padding:4px 6px; border-radius:6px;
    white-space:break-spaces; overflow-wrap:anywhere; word-break:break-word; max-width:100%;
  }
  .sidebar .hl-id{ color:#ff5a5a; font-weight:inherit; }
  
  .app{
    margin-left:300px;
    padding:12px 16px 60px;
    min-height:calc(100vh - 56px);
    max-height:calc(100vh - 56px);
    overflow:hidden;
    max-width:calc(100vw - 300px);
  }
  @media (max-width:700px){
    .app{margin-left:0;padding:12px 12px 80px;max-width:100vw}
    .sidebar{position:static;width:auto;top:auto;bottom:auto;border-right:none;box-shadow:none}
  }

  /* ─── FM26-Style Dashboard Grid System ───────────────────────────── */
  .dashboard{
    display:grid;
    grid-template-rows:auto 1fr;
    gap:10px;
    height:calc(100vh - 130px);
    max-height:calc(100vh - 130px);
    overflow:hidden;
  }
  .dashboard-header{
    display:grid;
    grid-template-columns:1fr auto;
    gap:10px;
    align-items:stretch;
  }
  .dashboard-main{
    display:grid;
    grid-template-columns:320px 1fr;
    gap:10px;
    height:100%;
    min-height:0;
    overflow:hidden;
  }
  .dashboard-left{
    display:flex;
    flex-direction:column;
    gap:8px;
    min-height:0;
    overflow:hidden;
  }
  .dashboard-right{
    display:grid;
    grid-template-columns:repeat(2, 1fr);
    grid-template-rows:auto 1fr auto;
    gap:10px;
    min-height:0;
    overflow:hidden;
  }
  .dashboard-right .tile-wide{
    grid-column:1/-1;
  }
  @media (max-width:1200px){
    .dashboard-main{
      grid-template-columns:280px 1fr;
    }
  }
  @media (max-width:1000px){
    .dashboard-main{
      grid-template-columns:1fr;
      grid-template-rows:auto 1fr;
    }
    .dashboard-left{
      flex-direction:row;
      flex-wrap:wrap;
    }
    .dashboard-right{
      grid-template-columns:1fr;
    }
  }

  /* ─── Tile System (FM26 style) ────────────────────────── */
  .tile{
    background:var(--bg2);
    border:1px solid var(--border);
    border-radius:10px;
    padding:10px;
    overflow:hidden;
    display:flex;
    flex-direction:column;
    min-height:0;
  }
  .tile-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:6px;
    padding-bottom:6px;
    border-bottom:1px solid var(--border);
    flex-shrink:0;
  }
  .tile-title{
    font-size:10px;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:0.06em;
    color:var(--muted);
  }
  .tile-action{
    font-size:10px;
    color:var(--accent-light);
    cursor:pointer;
    transition:all 0.2s;
    padding:2px 6px;
    border-radius:4px;
    background:transparent;
    border:none;
  }
  .tile-action:hover{
    color:var(--brand-light);
    background:var(--surface-1);
  }
  .tile-body{
    flex:1;
    min-height:0;
    overflow:auto;
  }
  .tile-body::-webkit-scrollbar{
    width:3px;
  }
  .tile-body::-webkit-scrollbar-thumb{
    background:var(--border);
    border-radius:2px;
  }

  /* Tile variations */
  .tile-compact{padding:8px}
  .tile-flush{padding:0}
  .tile-flush .tile-header{padding:10px 10px 6px;margin-bottom:0;border-bottom:none}
  .tile-flush .tile-body{padding:0}
  .tile-accent{border-color:var(--accent);border-width:2px}
  .tile-highlight{background:linear-gradient(135deg, var(--bg2), rgba(16,185,129,0.08))}
  .tile-clickable{cursor:pointer;transition:all 0.2s}
  .tile-clickable:hover{border-color:var(--border-strong);transform:translateY(-1px);box-shadow:var(--shadow-sm)}

  /* ─── Stats Widget ────────────────────────────────────── */
  .stats-row{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(80px, 1fr));
    gap:8px;
  }
  .stat-mini{
    text-align:center;
    padding:8px 4px;
    background:var(--surface-1);
    border-radius:8px;
  }
  .stat-mini .value{
    font-size:1.1rem;
    font-weight:700;
    color:var(--text);
    line-height:1.2;
  }
  .stat-mini .label{
    font-size:9px;
    color:var(--muted);
    text-transform:uppercase;
    letter-spacing:0.03em;
  }
  .stat-mini.accent .value{
    color:var(--brand-light);
  }
  .stat-mini.highlight{
    background:var(--gradient-brand);
  }
  .stat-mini.highlight .value,
  .stat-mini.highlight .label{
    color:white;
  }

  /* ─── Cards / grid / metrics ───────────────────────── */
  .card{
    background:var(--bg2);
    border:1px solid var(--border);
    border-radius:16px;
    padding:20px;
    margin:12px 0;
    transition:all 0.3s ease;
    box-shadow:var(--shadow-sm);
  }
  .card:hover{
    border-color:var(--border-strong);
    box-shadow:var(--shadow-lg);
    transform:translateY(-2px);
  }
  .card h3{
    margin:0 0 16px 0;
    font-size:1.15rem;
    color:var(--text);
    letter-spacing:-0.01em;
  }

  .grid{display:grid;gap:14px}
  .grid.cols-2{grid-template-columns:repeat(2,1fr)}
  .grid.cols-3{grid-template-columns:repeat(3,1fr)}
  .grid.cols-4{grid-template-columns:repeat(4,1fr)}
  @media (max-width:1100px){.grid.cols-4{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:900px){.grid.cols-3{grid-template-columns:repeat(2,1fr)}}
  @media (max-width:700px){.grid.cols-2{grid-template-columns:1fr}}

  /* ─── Toolbar / Filters ───────────────────────────────── */
  .ap-toolbar{
    margin-bottom:16px;
  }
  .ap-toolbar h3{
    margin-bottom:12px;
    font-size:1rem;
    color:var(--text);
  }
  .ap-toolbar-row{
    display:flex;
    flex-wrap:wrap;
    align-items:center;
    gap:10px;
    margin-bottom:10px;
  }
  .ap-toolbar input,
  .ap-toolbar select{
    padding:8px 12px;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:8px;
    color:var(--text);
    font-size:13px;
    transition:all 0.2s;
  }
  .ap-toolbar input:focus,
  .ap-toolbar select:focus{
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 0 3px var(--accent-weak);
  }
  .ap-toolbar input::placeholder{
    color:var(--muted);
  }
  .ap-toolbar .w90{
    width:90px;
  }

  /* Segmented button group */
  .segmented{
    display:inline-flex;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:8px;
    padding:2px;
    gap:2px;
  }
  .seg-btn{
    padding:6px 12px;
    background:transparent;
    border:none;
    border-radius:6px;
    color:var(--muted);
    font-size:12px;
    font-weight:500;
    cursor:pointer;
    transition:all 0.2s;
  }
  .seg-btn:hover{
    color:var(--text);
    background:var(--surface-2);
  }
  .seg-btn.active{
    background:var(--accent);
    color:white;
  }

  /* Ghost button */
  .btn-ghost{
    padding:8px 12px;
    background:transparent;
    border:1px solid var(--border);
    border-radius:8px;
    color:var(--text);
    font-size:13px;
    font-weight:500;
    cursor:pointer;
    transition:all 0.2s;
  }
  .btn-ghost:hover{
    background:var(--surface-1);
    border-color:var(--border-strong);
  }

  /* Primary button */
  .btn-primary{
    padding:8px 16px;
    background:var(--gradient-brand);
    border:none;
    border-radius:8px;
    color:white;
    font-size:13px;
    font-weight:600;
    cursor:pointer;
    transition:all 0.2s;
  }
  .btn-primary:hover{
    opacity:0.9;
    transform:translateY(-1px);
    box-shadow:var(--shadow-md);
  }

  /* Row check (checkbox with label) */
  .row-check{
    display:flex;
    align-items:center;
    gap:6px;
    font-size:12px;
    color:var(--text);
    cursor:pointer;
  }
  .row-check input[type="checkbox"]{
    width:16px;
    height:16px;
    accent-color:var(--brand);
    cursor:pointer;
  }

  .metric{
    display:flex;
    align-items:center;
    justify-content:space-between;
    background:var(--gradient-surface);
    padding:16px 18px;
    border:1px solid var(--border);
    border-radius:14px;
    transition:all 0.2s ease;
  }
  .metric:hover{
    border-color:var(--border-strong);
    box-shadow:var(--shadow-sm);
  }
  .metric .label{
    color:var(--muted);
    font-size:12px;
    font-weight:500;
    text-transform:uppercase;
    letter-spacing:0.05em;
  }
  .metric .value{
    font-size:1.35rem;
    font-weight:700;
    background:var(--gradient-brand);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }
  
  /* Empty state */
  .empty-state{
    text-align:center;
    padding:60px 40px;
    max-width:500px;
    margin:40px auto;
  }
  .empty-icon{
    font-size:4rem;
    margin-bottom:20px;
  }
  .empty-state h3{
    margin-bottom:12px;
  }
  .empty-state p{
    color:var(--muted);
    margin-bottom:8px;
  }
  .empty-state .small{
    font-size:13px;
    opacity:0.8;
  }
  .empty-state strong{
    color:var(--accent-light);
  }

  /* Empty State Illustrations */
  .empty-illustration{
    width:120px;
    height:120px;
    margin:0 auto 20px;
    opacity:0.8;
  }
  .empty-illustration svg{
    width:100%;
    height:100%;
  }
  .empty-state-enhanced{
    background:var(--gradient-surface);
    border:1px dashed var(--border-strong);
    border-radius:20px;
  }
  .empty-state-enhanced .empty-illustration{
    animation:float 3s ease-in-out infinite;
  }
  @keyframes float{
    0%, 100% { transform:translateY(0); }
    50% { transform:translateY(-10px); }
  }

  /* Empty state type-specific colors */
  .empty-state.empty-team .empty-illustration{ color:var(--brand); }
  .empty-state.empty-players .empty-illustration{ color:var(--accent-light); }
  .empty-state.empty-league .empty-illustration{ color:var(--yellow); }
  .empty-state.empty-fixtures .empty-illustration{ color:var(--ok); }
  .empty-state.empty-error .empty-illustration{ color:var(--pain); }
  
  /* ═══════════════════════════════════════════════════════
     PITCH VISUALIZATION - FM26 STYLE
     ═══════════════════════════════════════════════════════ */

  .pitch-card{
    overflow:hidden;
    margin:0;
  }
  .pitch-title{
    margin-bottom:8px;
  }
  .pitch-title h3{
    margin-bottom:2px;
    font-size:0.95rem;
  }
  .pitch-subtitle{
    font-size:11px;
    color:var(--muted);
  }

  .pitch-container{
    display:flex;
    flex-direction:column;
    gap:8px;
  }

  .pitch-grass{
    position:relative;
    background:linear-gradient(180deg,
      var(--pitch-green) 0%,
      var(--pitch-green-light) 10%,
      var(--pitch-green) 10%,
      var(--pitch-green-light) 20%,
      var(--pitch-green) 20%,
      var(--pitch-green-light) 30%,
      var(--pitch-green) 30%,
      var(--pitch-green-light) 40%,
      var(--pitch-green) 40%,
      var(--pitch-green-light) 50%,
      var(--pitch-green) 50%,
      var(--pitch-green-light) 60%,
      var(--pitch-green) 60%,
      var(--pitch-green-light) 70%,
      var(--pitch-green) 70%,
      var(--pitch-green-light) 80%,
      var(--pitch-green) 80%,
      var(--pitch-green-light) 90%,
      var(--pitch-green) 90%,
      var(--pitch-green-light) 100%
    );
    border-radius:10px;
    padding:6px 4px;
    min-height:auto;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    gap:2px;
    border:2px solid var(--pitch-line);
    box-shadow:inset 0 0 30px rgba(0,0,0,0.3);
  }

  /* Compact pitch for dashboard - default */
  .pitch-compact .pitch-grass{
    padding:4px 3px;
  }
  
  /* Pitch markings - smaller for compact view */
  .pitch-grass::before{
    content:"";
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    width:60px;
    height:60px;
    border:1px solid var(--pitch-line);
    border-radius:50%;
    opacity:0.4;
  }
  .pitch-grass::after{
    content:"";
    position:absolute;
    top:50%;
    left:0;
    right:0;
    height:1px;
    background:var(--pitch-line);
    opacity:0.4;
  }

  .pitch-formation{
    position:absolute;
    top:4px;
    right:4px;
    background:rgba(0,0,0,0.6);
    padding:3px 8px;
    border-radius:6px;
    font-weight:700;
    font-size:10px;
    color:white;
    z-index:10;
  }

  .pitch-row{
    display:flex;
    justify-content:center;
    gap:4px;
    flex-wrap:nowrap;
    position:relative;
    z-index:5;
  }

  .pitch-row-fwd{ padding-top:4px; }
  .pitch-row-mid{ }
  .pitch-row-def{ }
  .pitch-row-gk{ padding-bottom:4px; }

  /* Compact player card on pitch */
  .player-card-pitch{
    position:relative;
    width:56px;
    background:linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
    border:1px solid rgba(255,255,255,0.25);
    border-radius:8px;
    padding:4px;
    cursor:pointer;
    transition:all 0.15s ease;
    backdrop-filter:blur(4px);
    box-shadow:0 2px 8px rgba(0,0,0,0.25);
  }
  .player-card-pitch:hover{
    transform:translateY(-2px) scale(1.05);
    border-color:rgba(255,255,255,0.5);
    box-shadow:0 4px 12px rgba(0,0,0,0.35);
    z-index:20;
  }
  .player-card-pitch.player-flagged{
    border-color:rgba(239, 68, 68, 0.5);
  }
  .player-card-pitch.player-flagged::after{
    content:"";
    position:absolute;
    inset:-1px;
    border-radius:8px;
    background:linear-gradient(135deg, rgba(239, 68, 68, 0.2), transparent);
    pointer-events:none;
  }

  .player-photo-wrapper{
    position:relative;
    width:100%;
    aspect-ratio:1/1;
    overflow:hidden;
    border-radius:6px;
    background:rgba(0,0,0,0.2);
    margin-bottom:3px;
  }
  .player-photo{
    width:100%;
    height:100%;
    object-fit:cover;
    object-position:top center;
  }
  .player-team-badge{
    position:absolute;
    bottom:2px;
    right:2px;
    width:14px;
    height:14px;
    object-fit:contain;
    filter:drop-shadow(0 1px 2px rgba(0,0,0,0.5));
  }

  .player-info{
    text-align:center;
  }
  .player-name{
    font-size:9px;
    font-weight:600;
    color:white;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    text-shadow:0 1px 1px rgba(0,0,0,0.5);
    margin-bottom:2px;
    line-height:1.1;
  }

  .player-points-row{
    display:flex;
    justify-content:center;
    gap:2px;
    margin-bottom:2px;
  }
  .player-pts{
    font-size:11px;
    font-weight:700;
    color:white;
    background:rgba(0,0,0,0.5);
    padding:1px 4px;
    border-radius:4px;
  }
  .player-pts.pts-high{
    background:rgba(16, 185, 129, 0.7);
  }
  .player-pts.pts-low{
    background:rgba(239, 68, 68, 0.6);
  }
  .player-xp{
    font-size:8px;
    color:rgba(255,255,255,0.7);
    align-self:center;
    display:none; /* Hide on compact view */
  }

  .player-mins-badge{
    font-size:7px;
    font-weight:600;
    padding:1px 4px;
    border-radius:3px;
    display:inline-block;
  }
  .player-mins-badge.mins-nailed{
    background:rgba(16, 185, 129, 0.35);
    color:#6ee7b7;
  }
  .player-mins-badge.mins-risk{
    background:rgba(251, 191, 36, 0.35);
    color:#fde68a;
  }
  .player-mins-badge.mins-cameo{
    background:rgba(239, 68, 68, 0.35);
    color:#fca5a5;
  }

  /* Captain/VC badges - smaller */
  .player-captain-badge,
  .player-vc-badge{
    position:absolute;
    top:-4px;
    left:-4px;
    width:16px;
    height:16px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:9px;
    font-weight:700;
    color:white;
    z-index:15;
    box-shadow:0 1px 4px rgba(0,0,0,0.4);
  }
  .player-captain-badge{
    background:linear-gradient(135deg, #fbbf24, #f59e0b);
  }
  .player-vc-badge{
    background:linear-gradient(135deg, #a78bfa, #8b5cf6);
  }

  /* Status badge - smaller */
  .player-status-badge{
    position:absolute;
    top:-4px;
    right:-4px;
    font-size:10px;
    filter:drop-shadow(0 1px 2px rgba(0,0,0,0.5));
    z-index:15;
  }

  /* Compact bench section */
  .bench-section{
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:8px;
    padding:6px 8px;
  }
  .bench-label{
    font-size:9px;
    font-weight:700;
    color:var(--muted);
    text-transform:uppercase;
    letter-spacing:0.08em;
    margin-bottom:6px;
    text-align:center;
  }
  .bench-row{
    display:flex;
    justify-content:center;
    gap:6px;
    flex-wrap:nowrap;
  }
  .bench-card{
    width:48px;
    opacity:0.85;
  }
  .bench-card:hover{
    opacity:1;
  }
  .bench-card .player-photo-wrapper{
    aspect-ratio:1/1;
  }
  .bench-card .player-name{
    font-size:8px;
  }
  .bench-card .player-pts{
    font-size:9px;
  }
  .bench-card .player-mins-badge{
    display:none;
  }
  .bench-pos-badge{
    position:absolute;
    top:-3px;
    left:-3px;
    width:14px;
    height:14px;
    border-radius:50%;
    background:var(--surface-3);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:8px;
    font-weight:700;
    color:var(--muted);
    z-index:15;
  }
  
  /* ─── Compact Team Header (FM26 Style) ─────────────────────────────── */
  .team-header-card{
    background:linear-gradient(135deg, var(--bg2), var(--bg3));
    border:none;
    overflow:hidden;
    position:relative;
    padding:12px 14px;
    margin:0;
  }
  .team-header-card::before{
    content:"";
    position:absolute;
    top:-50%;
    right:-20%;
    width:200px;
    height:200px;
    background:radial-gradient(circle, var(--accent-weak) 0%, transparent 70%);
    opacity:0.4;
  }

  .team-header-top{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
    position:relative;
    z-index:1;
  }
  .manager-info{}
  .team-name{
    font-size:1.1rem;
    margin-bottom:2px;
    background:var(--gradient-brand);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    background-clip:text;
  }
  .manager-name{
    color:var(--muted);
    font-size:12px;
  }

  .gw-status-badge{
    padding:5px 10px;
    background:var(--surface-2);
    border:1px solid var(--border);
    border-radius:999px;
    font-weight:600;
    font-size:11px;
    display:flex;
    align-items:center;
    gap:6px;
  }
  .gw-status-badge.is-live{
    background:rgba(239, 68, 68, 0.15);
    border-color:rgba(239, 68, 68, 0.4);
    color:#fca5a5;
  }
  .gw-status-badge .live-dot{
    width:6px;
    height:6px;
    background:#ef4444;
    border-radius:50%;
    animation:live-dot-pulse 1.5s ease-in-out infinite;
  }

  .team-stats-grid{
    display:grid;
    grid-template-columns:repeat(6, 1fr);
    gap:8px;
    position:relative;
    z-index:1;
  }
  @media (max-width:1100px){
    .team-stats-grid{grid-template-columns:repeat(3, 1fr)}
  }
  @media (max-width:600px){
    .team-stats-grid{grid-template-columns:repeat(2, 1fr)}
  }

  .stat-item{
    text-align:center;
    padding:8px 6px;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:8px;
    transition:all 0.15s ease;
  }
  .stat-item:hover{
    border-color:var(--border-strong);
    transform:translateY(-1px);
  }
  .stat-value{
    font-size:1rem;
    font-weight:700;
    color:var(--text);
    margin-bottom:1px;
    line-height:1.2;
  }
  .stat-label{
    font-size:9px;
    text-transform:uppercase;
    letter-spacing:0.04em;
    color:var(--muted);
    font-weight:600;
  }
  .stat-item.captain-stat .stat-value{
    color:var(--accent-light);
    font-size:0.9rem;
  }
  
  /* ─── Compact Insights Card ────────────────────────────────── */
  .insights-card h3{
    margin-bottom:8px;
    font-size:0.9rem;
  }
  .insights-list{
    display:flex;
    flex-direction:column;
    gap:6px;
  }
  .insight-item{
    display:flex;
    align-items:center;
    gap:8px;
    padding:8px 10px;
    border-radius:8px;
    background:var(--surface-1);
    border:1px solid var(--border);
  }
  .insight-icon{
    font-size:14px;
    flex-shrink:0;
  }
  .insight-text{
    flex:1;
    font-size:12px;
    line-height:1.3;
  }
  .insight-gain{
    font-weight:700;
    color:var(--good);
    font-size:11px;
    padding:2px 6px;
    background:rgba(16, 185, 129, 0.15);
    border-radius:4px;
    flex-shrink:0;
  }
  .insight-item.insight-good{
    border-color:rgba(16, 185, 129, 0.3);
    background:rgba(16, 185, 129, 0.05);
  }
  .insight-item.insight-warning{
    border-color:rgba(251, 191, 36, 0.3);
    background:rgba(251, 191, 36, 0.05);
  }

  /* ─── Compact Fixtures Preview ─────────────────────────────── */
  .fixtures-preview-card h3{
    margin-bottom:8px;
    font-size:0.9rem;
  }
  .fixtures-preview-grid{
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .fixture-team-row{
    display:flex;
    align-items:center;
    gap:8px;
    padding:5px 8px;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:6px;
  }
  .fixture-team-badge{
    width:18px;
    height:18px;
    object-fit:contain;
    flex-shrink:0;
  }
  .fixture-team-name{
    font-weight:600;
    font-size:11px;
    min-width:32px;
    flex-shrink:0;
  }
  .fixtures-strip{
    display:flex;
    gap:4px;
    flex:1;
    justify-content:flex-end;
  }
  .fx{
    min-width:48px;
    text-align:center;
    font-weight:700;
    font-size:9px;
    padding:3px 5px;
    border-radius:4px;
    border:1px solid;
    background:var(--surface-1);
  }
  
  /* ─── Table / sorting ──────────────────────────────── */
  .table{
    width:100%;
    border-collapse:collapse;
    border-radius:12px;
    overflow:hidden;
  }
  .table th,.table td{
    padding:14px 12px;
    border-bottom:1px solid var(--border);
    text-align:left;
  }
  .table th{
    color:var(--muted);
    font-weight:600;
    font-size:11px;
    text-transform:uppercase;
    letter-spacing:0.05em;
    background:var(--surface-1);
    border-bottom:1px solid var(--border-strong);
  }
  .table tbody tr{
    transition:all 0.15s ease;
  }
  .table tbody tr:hover{
    background:var(--surface-1);
    box-shadow:inset 0 0 0 1px var(--border-strong);
  }
  .table th.th-sortable{
    cursor:pointer;
    user-select:none;
    position:relative;
    padding-right:24px;
    transition:color 0.2s ease;
  }
  .table th.th-sortable:hover{
    color:var(--text);
  }
  .table th.th-sortable::after{
    content:"⇅";
    position:absolute;
    right:8px;
    top:50%;
    transform:translateY(-50%);
    opacity:0.4;
    font-size:12px;
  }
  .table th.th-sortable.active{
    color:var(--accent-light);
  }
  .table th.th-sortable.active.asc::after{
    content:"↑";
    opacity:1;
    color:var(--accent-light);
  }
  .table th.th-sortable.active.desc::after{
    content:"↓";
    opacity:1;
    color:var(--accent-light);
  }
  
  /* ─── Buttons / controls ───────────────────────────── */
  input,select,button{font:inherit}

  .btn-primary{
    background:var(--gradient-brand);
    border:none;
    color:#ffffff;
    padding:10px 18px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    font-size:14px;
    transition:all 0.2s ease;
    box-shadow:var(--shadow-sm);
  }
  .btn-primary:hover{
    transform:translateY(-2px);
    box-shadow:var(--shadow-md);
  }
  .btn-primary:active{
    transform:translateY(0);
  }

  .btn-ghost{
    background:var(--surface-1);
    border:1px solid var(--border);
    color:var(--text);
    padding:9px 16px;
    border-radius:10px;
    cursor:pointer;
    font-weight:500;
    font-size:13px;
    transition:all 0.2s ease;
  }
  .btn-ghost:hover{
    background:var(--surface-2);
    border-color:var(--border-strong);
    transform:translateY(-1px);
  }

  .controls{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-bottom:12px;
  }

  .badge{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    font-size:11px;
    font-weight:600;
    border:1px solid var(--border);
    color:var(--muted);
    background:var(--surface-1);
    transition:all 0.2s ease;
  }
  .badge:hover{
    border-color:var(--border-strong);
  }

  .tag{
    font-size:12px;
    color:var(--muted);
    margin-left:6px;
  }

  canvas.spark{height:28px!important}
  
  /* ─── Status / chip helpers ────────────────────────── */
  .status-a{color:var(--good);font-weight:600}
  .status-d{color:var(--mid);font-weight:600}
  .status-i{color:var(--pain);font-weight:600}
  .status-n{color:var(--muted);font-weight:600}

  .chip{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:6px 12px;
    border:1px solid var(--border);
    border-radius:999px;
    background:var(--surface-1);
    font-size:12px;
    font-weight:500;
    transition:all 0.2s ease;
  }
  .chip:hover{
    border-color:var(--border-strong);
    background:var(--surface-2);
  }

  .chip-accent{
    background:var(--accent-weak);
    border-color:var(--accent);
    color:var(--accent-light);
    font-weight:600;
  }
  .chip-accent:hover{
    background:var(--accent-strong);
  }

  .chip-dim{
    opacity:0.85;
  }

  .chips{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
  }

  .eo-chips{
    display:flex;
    gap:8px;
    align-items:center;
  }
  
  /* ─── Modal ────────────────────────────────────────── */
  .modal__backdrop{
    position:fixed;
    inset:0;
    background:rgba(0, 0, 0, 0.75);
    backdrop-filter:blur(8px);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:1000;
    animation:fadeIn 0.2s ease;
  }

  @keyframes fadeIn{
    from{opacity:0}
    to{opacity:1}
  }

  .modal{
    width:min(760px, 92vw);
    background:var(--bg2);
    border:1px solid var(--border-strong);
    border-radius:16px;
    box-shadow:var(--shadow-xl);
    overflow:hidden;
    animation:modalSlideIn 0.3s ease;
  }

  @keyframes modalSlideIn{
    from{
      opacity:0;
      transform:translateY(-20px) scale(0.95);
    }
    to{
      opacity:1;
      transform:translateY(0) scale(1);
    }
  }

  .modal__head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:16px 20px;
    border-bottom:1px solid var(--border-strong);
    background:var(--surface-1);
  }
  .modal__title{
    font-weight:700;
    font-size:1.1rem;
    color:var(--text);
    letter-spacing:-0.01em;
  }
  .modal__close{
    background:transparent;
    border:none;
    color:var(--muted);
    font-size:24px;
    cursor:pointer;
    width:32px;
    height:32px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:8px;
    transition:all 0.2s ease;
  }
  .modal__close:hover{
    background:var(--surface-2);
    color:var(--text);
  }
  .modal__body{
    padding:20px;
    max-height:72vh;
    overflow:auto;
  }
  
  /* ─── FDR chips ────────────────────────────────────── */
  .fdr{
    display:inline-block;
    min-width:40px;
    text-align:center;
    padding:6px 10px;
    border-radius:10px;
    font-weight:700;
    font-size:11px;
    border:1px solid;
    transition:all 0.2s ease;
  }
  .fdr:hover{
    transform:scale(1.05);
  }
  .fdr-1{
    background:rgba(16, 185, 129, 0.15);
    color:#6ee7b7;
    border-color:rgba(16, 185, 129, 0.4);
  }
  .fdr-2{
    background:rgba(52, 211, 153, 0.15);
    color:#86efac;
    border-color:rgba(52, 211, 153, 0.4);
  }
  .fdr-3{
    background:rgba(251, 191, 36, 0.15);
    color:#fde68a;
    border-color:rgba(251, 191, 36, 0.4);
  }
  .fdr-4{
    background:rgba(251, 146, 60, 0.15);
    color:#fdba74;
    border-color:rgba(251, 146, 60, 0.4);
  }
  .fdr-5{
    background:rgba(244, 63, 94, 0.15);
    color:#fca5a5;
    border-color:rgba(244, 63, 94, 0.4);
  }
  
  /* ─── Abbreviation tooltip (no native title) ───────── */
  .abbr-tip{position:relative;border-bottom:1px dashed var(--muted);cursor:help;transition:color .15s}
  .abbr-tip:hover{color:#c7d2fe}
  .abbr-tip::after{
    content:attr(data-tooltip);
    position:absolute;left:50%;top:-8px;transform:translate(-50%,-100%) scale(.98);
    white-space:nowrap;background:#0b1220;color:var(--text);border:1px solid var(--border);
    border-radius:10px;padding:8px 10px;font-size:12px;line-height:1.2;box-shadow:0 8px 20px rgba(0,0,0,.35);
    opacity:0;pointer-events:none;transition:opacity .12s, transform .12s;z-index:100;
  }
  .abbr-tip:hover::after{opacity:1;transform:translate(-50%,-110%) scale(1)}
  
  /* ─── Minutes risk badges ──────────────────────────── */
  .badge-green{
    background:rgba(16, 185, 129, 0.15);
    color:#6ee7b7;
    border:1px solid rgba(16, 185, 129, 0.4);
    font-weight:700;
  }
  .badge-amber{
    background:rgba(251, 191, 36, 0.15);
    color:#fde68a;
    border:1px solid rgba(251, 191, 36, 0.4);
    font-weight:700;
  }
  .badge-red{
    background:rgba(244, 63, 94, 0.15);
    color:#fca5a5;
    border:1px solid rgba(244, 63, 94, 0.4);
    font-weight:700;
  }
  .c-badge{
    background:rgba(59, 130, 246, 0.2);
    color:#93c5fd;
    border:1px solid rgba(59, 130, 246, 0.5);
    font-weight:700;
  }
  .vc-badge{
    background:rgba(147, 51, 234, 0.2);
    color:#d8b4fe;
    border:1px solid rgba(147, 51, 234, 0.5);
    font-weight:700;
  }
  
  /* ─── Conditional cells ────────────────────────────── */
  .points-high{background:rgba(34,197,94,.12)}
  .points-low{background:rgba(239,68,68,.12)}
  .minutes-zero{background:rgba(239,68,68,.08)}
  .cell-good{background:rgba(34,197,94,.08)}
  .cell-warn{background:rgba(234,179,8,.08)}
  .cell-bad{background:rgba(239,68,68,.08)}
  
  /* ─── FX chip colors (used in fixtures-strip) ───────────────────────────────── */
  .fx.fdr-1{ background:rgba(16, 185, 129, 0.15); border-color:rgba(16, 185, 129, 0.4); color:#6ee7b7; }
  .fx.fdr-2{ background:rgba(52, 211, 153, 0.12); border-color:rgba(52, 211, 153, 0.4); color:#86efac; }
  .fx.fdr-3{ background:rgba(148, 163, 184, 0.12); border-color:rgba(148, 163, 184, 0.4); color:var(--muted); }
  .fx.fdr-4{ background:rgba(251, 146, 60, 0.12); border-color:rgba(251, 146, 60, 0.4); color:#fdba74; }
  .fx.fdr-5{ background:rgba(244, 63, 94, 0.12); border-color:rgba(244, 63, 94, 0.4); color:#fca5a5; }
  .fx:hover{ transform:scale(1.03); }

  .name-cell{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .team-chip{
    font-weight:700;
    font-size:11px;
    padding:4px 8px;
    border-radius:8px;
    background:var(--surface-2);
    border:1px solid var(--border);
    transition:all 0.2s ease;
  }
  .team-chip:hover{
    background:var(--surface-3);
    border-color:var(--border-strong);
  }
  .name-cell .nm{
    font-weight:600;
    letter-spacing:0.02em;
  }

  .status-pill{
    padding:5px 10px;
    border-radius:999px;
    font-size:11px;
    font-weight:700;
    border:1px solid;
    transition:all 0.2s ease;
  }
  .status-pill:hover{
    transform:scale(1.05);
  }
  .status-pill.st-okay{
    background:rgba(16, 185, 129, 0.15);
    color:#6ee7b7;
    border-color:rgba(16, 185, 129, 0.4);
  }
  .status-pill.st-doubt{
    background:rgba(251, 191, 36, 0.15);
    color:#fde68a;
    border-color:rgba(251, 191, 36, 0.4);
  }
  .status-pill.st-inj{
    background:rgba(244, 63, 94, 0.15);
    color:#fca5a5;
    border-color:rgba(244, 63, 94, 0.4);
  }
  .status-pill.st-sus,.status-pill.st-out{
    background:rgba(148, 163, 184, 0.15);
    color:var(--muted);
    border-color:rgba(148, 163, 184, 0.4);
  }

  /* Progress bar */
  .progress{
    margin-top:12px;
    width:100%;
    height:10px;
    background:var(--surface-1);
    border-radius:999px;
    overflow:hidden;
    border:1px solid var(--border);
    box-shadow:inset 0 2px 4px rgba(0,0,0,0.2);
  }
  .progress .bar{
    height:100%;
    background:var(--gradient-brand);
    width:0%;
    transition:width 0.3s ease;
    box-shadow:0 0 10px rgba(16, 185, 129, 0.5);
  }
  
  .legend.small{font-size:12px;opacity:0.85}
  .mt-8{margin-top:8px}
  .mb-8{margin-bottom:8px}
  .b{font-weight:700}
  .small{font-size:13px}
  .muted{color:var(--muted)}
  .bullets{padding-left:20px}
  .bullets li{margin:8px 0;line-height:1.5}
  
  /* ─── Light theme ──────────────────────────────────── */
  :root[data-theme="light"]{
    --bg:#f8fafc;
    --bg2:#ffffff;
    --bg3:#f1f5f9;
    --text:#0f172a;
    --muted:#64748b;
    --muted-2:#94a3b8;

    --brand:#10b981;
    --brand-light:#059669;
    --brand-dark:#047857;

    --card:#ffffff;
    --border:rgba(15, 23, 42, 0.1);
    --border-strong:rgba(15, 23, 42, 0.2);

    --red:#dc2626;
    --yellow:#f59e0b;
    --good:#10b981;
    --ok:#34d399;
    --mid:#f59e0b;
    --hard:#f97316;
    --pain:#ef4444;

    --surface-1:rgba(15, 23, 42, 0.03);
    --surface-2:rgba(15, 23, 42, 0.06);
    --surface-3:rgba(15, 23, 42, 0.1);

    --accent:#3b82f6;
    --accent-light:#2563eb;
    --accent-weak:rgba(59, 130, 246, 0.1);
    --accent-strong:rgba(59, 130, 246, 0.15);

    --shadow-sm:0 2px 8px rgba(15, 23, 42, 0.08);
    --shadow-md:0 4px 16px rgba(15, 23, 42, 0.12);
    --shadow-lg:0 8px 32px rgba(15, 23, 42, 0.16);
    --shadow-xl:0 16px 48px rgba(15, 23, 42, 0.2);
    
    --pitch-green:#4ade80;
    --pitch-green-light:#86efac;
    --pitch-line:rgba(0, 0, 0, 0.2);

    --gradient-brand:linear-gradient(135deg, #10b981 0%, #059669 100%);
    --gradient-accent:linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    --gradient-surface:linear-gradient(180deg, rgba(15,23,42,0.03) 0%, rgba(15,23,42,0.01) 100%);
  }
  :root[data-theme="light"] .topbar{
    background:rgba(255, 255, 255, 0.9);
    border-bottom:1px solid var(--border-strong);
  }
  :root[data-theme="light"] .sidebar{
    background:var(--bg2);
  }
  :root[data-theme="light"] .footer{
    background:rgba(255, 255, 255, 0.9);
  }
  :root[data-theme="light"] .player-card-pitch{
    background:linear-gradient(145deg, rgba(0,0,0,0.05), rgba(0,0,0,0.02));
    border-color:rgba(0,0,0,0.15);
  }
  :root[data-theme="light"] .player-name{
    color:#1e293b;
    text-shadow:none;
  }
  :root[data-theme="light"] .player-pts{
    color:#1e293b;
    background:rgba(255,255,255,0.8);
  }
  :root[data-theme="light"] .abbr-tip::after{
    background:#ffffff;
    color:var(--text);
    border-color:var(--border-strong);
  }

  /* Text selection */
  :root{
    --selection-bg: #273449;
    --selection-fg: #ffffff;
    color-scheme: dark;
  }
  :root[data-theme="light"]{
    --selection-bg: #cfe8ff;
    --selection-fg: #0b0f19;
    color-scheme: light;
  }
  ::selection { background: var(--selection-bg); color: var(--selection-fg); }
  ::-moz-selection { background: var(--selection-bg); color: var(--selection-fg); }

  /* ─── Copy Button ───────────────────────────────────── */
  .input-with-copy{
    position:relative;
    display:flex;
    align-items:center;
  }
  .input-with-copy input{
    flex:1;
    padding-right:40px;
  }
  .copy-btn{
    position:absolute;
    right:4px;
    top:50%;
    transform:translateY(-50%);
    width:32px;
    height:32px;
    border:none;
    background:var(--surface-2);
    border-radius:8px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:all 0.2s ease;
  }
  .copy-btn:hover{
    background:var(--surface-3);
    transform:translateY(-50%) scale(1.05);
  }
  .copy-btn.copied{
    background:rgba(16, 185, 129, 0.3);
  }
  .copy-btn .copy-icon{
    font-size:14px;
  }

  /* ─── Animated Number Transitions ────────────────────── */
  .animate-points{
    animation:pointsBounce 0.5s ease;
  }
  @keyframes pointsBounce{
    0% { transform:scale(1); }
    30% { transform:scale(1.3); }
    60% { transform:scale(0.95); }
    100% { transform:scale(1); }
  }

  .count-up{
    transition:all 0.3s ease;
  }

  .points-changed{
    animation:pointsGlow 1s ease;
  }
  @keyframes pointsGlow{
    0% { box-shadow:0 0 0 0 rgba(16, 185, 129, 0.7); }
    50% { box-shadow:0 0 20px 4px rgba(16, 185, 129, 0.4); }
    100% { box-shadow:0 0 0 0 rgba(16, 185, 129, 0); }
  }

  /* ─── Confetti Celebration ───────────────────────────── */
  .confetti-container{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:9999;
    overflow:hidden;
  }
  .confetti{
    position:absolute;
    width:10px;
    height:10px;
    opacity:0;
    animation:confettiFall 3s ease-out forwards;
  }
  @keyframes confettiFall{
    0% {
      opacity:1;
      transform:translateY(0) rotate(0deg) scale(1);
    }
    100% {
      opacity:0;
      transform:translateY(100vh) rotate(720deg) scale(0.5);
    }
  }

  .haul-badge{
    position:absolute;
    top:-5px;
    left:50%;
    transform:translateX(-50%);
    background:linear-gradient(135deg, #fbbf24, #f59e0b);
    color:#1f2937;
    font-size:7px;
    font-weight:800;
    padding:1px 4px;
    border-radius:3px;
    white-space:nowrap;
    z-index:20;
    box-shadow:0 1px 4px rgba(251, 191, 36, 0.4);
    animation:haulPulse 2s ease-in-out infinite;
  }
  @keyframes haulPulse{
    0%, 100% { transform:translateX(-50%) scale(1); }
    50% { transform:translateX(-50%) scale(1.05); }
  }

  /* ─── Skeleton Loading States ────────────────────────── */
  .skeleton{
    background:linear-gradient(90deg,
      var(--surface-1) 25%,
      var(--surface-2) 50%,
      var(--surface-1) 75%
    );
    background-size:200% 100%;
    animation:shimmer 1.5s infinite;
    border-radius:8px;
  }
  @keyframes shimmer{
    0% { background-position:200% 0; }
    100% { background-position:-200% 0; }
  }

  .skeleton-text{
    height:14px;
    margin:4px 0;
  }
  .skeleton-text.short{ width:60%; }
  .skeleton-text.medium{ width:80%; }
  .skeleton-text.full{ width:100%; }

  .skeleton-card{
    padding:20px;
    margin:12px 0;
  }

  .skeleton-pitch{
    height:480px;
    border-radius:16px;
  }

  .skeleton-stat{
    height:60px;
    border-radius:12px;
  }

  .skeleton-player{
    width:90px;
    height:140px;
    border-radius:12px;
  }

  .skeleton-header{
    height:180px;
    border-radius:16px;
    margin-bottom:16px;
  }

  .skeleton-insights{
    height:120px;
    border-radius:16px;
  }

  .skeleton-grid{
    display:grid;
    gap:14px;
  }
  .skeleton-grid.cols-6{
    grid-template-columns:repeat(6, 1fr);
  }
  @media (max-width:900px){
    .skeleton-grid.cols-6{grid-template-columns:repeat(3, 1fr)}
  }

  /* ─── Sparkline Mini-Charts ──────────────────────────── */
  .sparkline-container{
    display:inline-flex;
    align-items:center;
    gap:6px;
    padding:2px 8px;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:8px;
    cursor:help;
  }
  .sparkline-svg{
    width:50px;
    height:20px;
  }
  .sparkline-line{
    fill:none;
    stroke:var(--accent-light);
    stroke-width:1.5;
    stroke-linecap:round;
    stroke-linejoin:round;
  }
  .sparkline-area{
    fill:url(#sparklineGradient);
    opacity:0.3;
  }
  .sparkline-dot{
    fill:var(--accent-light);
  }
  .sparkline-value{
    font-size:11px;
    font-weight:600;
    color:var(--muted);
  }
  .sparkline-trend-up .sparkline-line{ stroke:var(--good); }
  .sparkline-trend-up .sparkline-dot{ fill:var(--good); }
  .sparkline-trend-down .sparkline-line{ stroke:var(--pain); }
  .sparkline-trend-down .sparkline-dot{ fill:var(--pain); }

  /* ─── Position Row Tints ─────────────────────────────── */
  .pos-gkp{ background:rgba(251, 191, 36, 0.05); }
  .pos-def{ background:rgba(52, 211, 153, 0.05); }
  .pos-mid{ background:rgba(59, 130, 246, 0.05); }
  .pos-fwd{ background:rgba(244, 63, 94, 0.05); }

  /* Player card haul glow - compact */
  .player-card-pitch.player-haul{
    border-color:rgba(251, 191, 36, 0.6);
    box-shadow:0 0 12px rgba(251, 191, 36, 0.3);
  }
  .player-card-pitch.player-haul::before{
    content:"";
    position:absolute;
    inset:-1px;
    border-radius:8px;
    background:linear-gradient(135deg, rgba(251, 191, 36, 0.15), transparent 60%);
    pointer-events:none;
  }

  /* ─── Keyboard Shortcuts Overlay ─────────────────────── */
  .keyboard-help-overlay{
    position:fixed;
    inset:0;
    background:rgba(0, 0, 0, 0.75);
    backdrop-filter:blur(8px);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:2000;
    animation:fadeIn 0.2s ease;
  }
  .keyboard-help-modal{
    background:var(--bg2);
    border:1px solid var(--border-strong);
    border-radius:16px;
    width:min(480px, 90vw);
    box-shadow:var(--shadow-xl);
    overflow:hidden;
  }
  .keyboard-help-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:16px 20px;
    background:var(--surface-1);
    border-bottom:1px solid var(--border);
  }
  .keyboard-help-header h3{
    margin:0;
    font-size:1.1rem;
  }
  .keyboard-help-close{
    background:none;
    border:none;
    font-size:24px;
    color:var(--muted);
    cursor:pointer;
    padding:4px 8px;
    border-radius:8px;
    transition:all 0.2s;
  }
  .keyboard-help-close:hover{
    background:var(--surface-2);
    color:var(--text);
  }
  .keyboard-help-content{
    padding:20px;
    display:grid;
    grid-template-columns:repeat(2, 1fr);
    gap:24px;
  }
  @media (max-width:500px){
    .keyboard-help-content{grid-template-columns:1fr}
  }
  .shortcut-group h4{
    font-size:12px;
    text-transform:uppercase;
    letter-spacing:0.05em;
    color:var(--muted);
    margin:0 0 12px;
  }
  .shortcut-row{
    display:flex;
    align-items:center;
    gap:12px;
    padding:6px 0;
    font-size:14px;
  }
  .shortcut-row kbd{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    min-width:28px;
    height:28px;
    padding:0 8px;
    background:var(--surface-2);
    border:1px solid var(--border-strong);
    border-radius:6px;
    font-family:inherit;
    font-size:12px;
    font-weight:600;
    color:var(--text);
    box-shadow:0 2px 0 var(--border);
  }

  /* ─── Collapsible Sidebar ────────────────────────────── */
  .sidebar{
    transition:transform 0.3s ease, width 0.3s ease;
  }
  .sidebar-toggle{
    position:fixed;
    top:50%;
    left:300px;
    transform:translateY(-50%);
    width:28px;
    height:48px;
    background:var(--bg2);
    border:1px solid var(--border-strong);
    border-radius:0 8px 8px 0;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--muted);
    font-size:12px;
    transition:all 0.3s;
    z-index:150;
  }
  .sidebar-toggle:hover{
    background:var(--surface-2);
    color:var(--text);
  }
  .toggle-icon{
    transition:transform 0.3s;
  }

  /* Collapsed state */
  .sidebar-collapsed .sidebar{
    transform:translateX(-100%);
  }
  .sidebar-collapsed .sidebar-toggle{
    left:0;
  }
  .sidebar-collapsed .toggle-icon{
    transform:rotate(180deg);
  }
  .sidebar-collapsed .app{
    margin-left:0;
    max-width:100vw;
  }
  .sidebar-collapsed .footer{
    left:0;
  }

  /* ─── Mobile Bottom Navigation ───────────────────────── */
  /* Hide by default on desktop */
  .mobile-bottom-nav{
    display:none;
  }

  @media (max-width:700px){
    .topbar .nav{
      display:none;
    }

    .mobile-bottom-nav{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:rgba(13, 20, 36, 0.95);
      backdrop-filter:blur(16px);
      border-top:1px solid var(--border-strong);
      display:flex;
      justify-content:space-around;
      padding:8px 4px;
      padding-bottom:max(8px, env(safe-area-inset-bottom));
      z-index:100;
    }

    .mobile-nav-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:2px;
      padding:6px 8px;
      color:var(--muted);
      text-decoration:none;
      font-size:10px;
      font-weight:500;
      border-radius:8px;
      transition:all 0.2s;
      min-width:52px;
    }
    .mobile-nav-item:hover,
    .mobile-nav-item.active{
      color:var(--accent-light);
      background:var(--accent-weak);
    }
    .mobile-nav-icon{
      font-size:20px;
    }

    /* Hide sidebar toggle on mobile */
    .sidebar-toggle{
      display:none;
    }

    /* Adjust footer for bottom nav */
    .footer{
      bottom:60px;
    }

    /* Adjust main content padding */
    .app{
      padding-bottom:140px;
    }
  }

  /* ─── Watchlist Star - Compact ─────────────────────────────────── */
  .player-card-pitch .watchlist-btn{
    position:absolute;
    bottom:2px;
    right:2px;
    background:rgba(0,0,0,0.4);
    border:none;
    border-radius:50%;
    cursor:pointer;
    font-size:10px;
    width:16px;
    height:16px;
    display:none; /* Hidden by default on compact view */
    align-items:center;
    justify-content:center;
    opacity:0.5;
    transition:all 0.2s;
    z-index:15;
  }
  .player-card-pitch:hover .watchlist-btn{
    display:flex;
  }
  .player-card-pitch .watchlist-btn:hover{
    opacity:1;
    transform:scale(1.2);
    background:rgba(0,0,0,0.6);
  }
  .player-card-pitch .watchlist-btn.active{
    display:flex;
    opacity:1;
  }
  .player-card-pitch .watchlist-btn .star-icon{
    color:rgba(255,255,255,0.7);
  }
  .player-card-pitch .watchlist-btn.active .star-icon{
    color:#fbbf24;
  }

  /* Generic watchlist button for tables */
  .watchlist-btn{
    background:none;
    border:none;
    cursor:pointer;
    font-size:18px;
    padding:4px;
    opacity:0.4;
    transition:all 0.2s;
  }
  .watchlist-btn:hover{
    opacity:0.8;
    transform:scale(1.1);
  }
  .watchlist-btn.active{
    opacity:1;
  }
  .watchlist-btn.active .star-icon{
    color:#fbbf24;
  }

  /* ─── Player Compare Modal ────────────────────────────── */
  .compare-selection-bar{
    position:fixed;
    bottom:60px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    align-items:center;
    gap:16px;
    padding:12px 20px;
    background:rgba(13, 20, 36, 0.95);
    backdrop-filter:blur(16px);
    border:1px solid var(--border-strong);
    border-radius:16px;
    box-shadow:var(--shadow-xl);
    z-index:500;
    animation:slideUp 0.3s ease;
  }
  @keyframes slideUp{
    from { opacity:0; transform:translate(-50%, 20px); }
    to { opacity:1; transform:translate(-50%, 0); }
  }
  .compare-selection-bar .compare-chips{
    display:flex;
    gap:8px;
  }
  .compare-selection-bar .compare-chip{
    display:flex;
    align-items:center;
    gap:6px;
    padding:6px 10px;
    background:var(--surface-2);
    border:1px solid var(--border);
    border-radius:8px;
    font-size:13px;
    font-weight:500;
  }
  .compare-selection-bar .compare-chip .remove-btn{
    background:none;
    border:none;
    color:var(--muted);
    cursor:pointer;
    font-size:14px;
    line-height:1;
    padding:2px;
    border-radius:4px;
    transition:all 0.2s;
  }
  .compare-selection-bar .compare-chip .remove-btn:hover{
    background:rgba(244, 63, 94, 0.2);
    color:var(--pain);
  }
  .compare-selection-bar .compare-btn{
    padding:8px 16px;
    background:var(--gradient-brand);
    border:none;
    border-radius:8px;
    color:white;
    font-weight:600;
    font-size:13px;
    cursor:pointer;
    transition:all 0.2s;
  }
  .compare-selection-bar .compare-btn:disabled{
    opacity:0.5;
    cursor:not-allowed;
  }
  .compare-selection-bar .compare-btn:not(:disabled):hover{
    transform:translateY(-2px);
    box-shadow:var(--shadow-md);
  }
  .compare-selection-bar .clear-btn{
    background:none;
    border:none;
    color:var(--muted);
    font-size:12px;
    cursor:pointer;
    text-decoration:underline;
    transition:color 0.2s;
  }
  .compare-selection-bar .clear-btn:hover{
    color:var(--text);
  }

  /* Compare modal content */
  .compare-modal{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:24px;
    min-width:min(800px, 90vw);
  }
  @media (max-width:600px){
    .compare-modal{grid-template-columns:1fr}
  }
  .compare-player{
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:12px;
    padding:16px;
  }
  .compare-player-header{
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:16px;
    padding-bottom:12px;
    border-bottom:1px solid var(--border);
  }
  .compare-player-photo{
    width:60px;
    height:70px;
    object-fit:cover;
    object-position:top center;
    border-radius:8px;
    background:var(--surface-2);
  }
  .compare-player-info h4{
    margin:0 0 4px;
    font-size:1.1rem;
  }
  .compare-player-info .sub{
    font-size:13px;
    color:var(--muted);
  }
  .compare-stats{
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  .compare-stat-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:8px 10px;
    background:var(--surface-1);
    border-radius:8px;
  }
  .compare-stat-row.winner{
    background:rgba(16, 185, 129, 0.1);
    border:1px solid rgba(16, 185, 129, 0.3);
  }
  .compare-stat-row .label{
    font-size:12px;
    color:var(--muted);
    font-weight:500;
  }
  .compare-stat-row .value{
    font-size:14px;
    font-weight:700;
    color:var(--text);
  }
  .compare-stat-row.winner .value{
    color:var(--good);
  }
  .compare-stat-row.loser .value{
    color:var(--muted);
  }
  .compare-verdict{
    grid-column:1/-1;
    text-align:center;
    padding:16px;
    background:var(--surface-1);
    border:1px solid var(--border);
    border-radius:12px;
  }
  .compare-verdict h4{
    margin:0 0 4px;
    font-size:1rem;
    color:var(--good);
  }
  .compare-verdict .sub{
    font-size:13px;
    color:var(--muted);
  }

  /* Select checkbox in table */
  .table .select-cell{
    width:32px;
    text-align:center;
  }
  .player-select-checkbox{
    width:18px;
    height:18px;
    accent-color:var(--brand);
    cursor:pointer;
  }
  .player-select-checkbox:disabled{
    opacity:0.3;
    cursor:not-allowed;
  }

  /* ─── Price Change Predictions ────────────────────────── */
  .price-change-indicator{
    display:inline-flex;
    align-items:center;
    gap:4px;
    padding:3px 8px;
    border-radius:6px;
    font-size:11px;
    font-weight:700;
    transition:all 0.2s;
  }
  .price-change-indicator.rise{
    background:rgba(16, 185, 129, 0.15);
    color:#6ee7b7;
    border:1px solid rgba(16, 185, 129, 0.3);
  }
  .price-change-indicator.fall{
    background:rgba(244, 63, 94, 0.15);
    color:#fca5a5;
    border:1px solid rgba(244, 63, 94, 0.3);
  }
  .price-change-indicator.stable{
    background:var(--surface-1);
    color:var(--muted);
    border:1px solid var(--border);
  }
  .price-change-indicator .arrow{
    font-size:12px;
  }
  .price-change-indicator.rise .arrow{
    animation:priceRise 1s ease-in-out infinite;
  }
  .price-change-indicator.fall .arrow{
    animation:priceFall 1s ease-in-out infinite;
  }
  @keyframes priceRise{
    0%, 100% { transform:translateY(0); }
    50% { transform:translateY(-2px); }
  }
  @keyframes priceFall{
    0%, 100% { transform:translateY(0); }
    50% { transform:translateY(2px); }
  }

  /* Price cell with indicator */
  .price-cell{
    display:flex;
    flex-direction:column;
    gap:4px;
  }
  .price-cell .price-value{
    font-weight:600;
  }

  /* Net transfers badge */
  .net-transfers{
    font-size:10px;
    color:var(--muted);
  }
  .net-transfers.positive{ color:var(--good); }
  .net-transfers.negative{ color:var(--pain); }
